{"version":3,"sources":["webpack:///./src/slides.js","webpack:///./src/slides_configs.js","webpack:///./src/index.js","webpack:///./src/scroll.js","webpack:///./src/treemap.js","webpack:///./src/menu.js"],"names":["d3","require","slidesConfigs","configs","textData","categoriesData","itemsData","quantititesData","numeral","fadeAllOut","select","selectAll","transition","duration","style","opacityLow","attr","defaultAnimation","slide","cat_1","selector","opacityMed","fadeIn","cat_2","categories","opacity","forEach","category","raise","fadeGroup","opacityHigh","register","delimiters","thousands","decimal","abbreviations","thousand","million","billion","trillion","currency","symbol","locale","defaultFormat","slides","i01","undefined","animation","opacityOff","i02","_i","i03","prevWidth","node","getBoundingClientRect","width","attrTween","interpolateNumber","this","prevHeight","i03_01","each","rect","parentNode","opacityMedLow","i04","_i2","svgSME","svgSMEHeight","height","svgSMEWidth","console","log","svg","svgHeight","svgWidth","s01","setTimeout","s03","s03_01","s03_02","s03_03","s04","s04_01","s04_02","s04_03","s04_04","s04_05","s04_06","s04_07","s05","s05_01","s05_02","s05_03","s06","s06_01","s06_02","s06_03","s06_04","s06_05","s07","s07_01","s07_02","s08","s08_01","s08_02","s09","s09_01","s10","s10_01","s10_02","s10_03","s10_04","explore","setSlideText","textParagraphs","Object","keys","key","index","text","id","slideMainCategory","slideCategories","slideValues","slideParent","document","getElementsByClassName","slideColor","getElementsByTagName","dataset","fill","cat","slideRect","getElementById","push","parseFloat","value","querySelectorAll","totalValue","reduce","a","b","perStudentValue","children","find","x","name","size","format","valueHtml","length","html","cat_1_text","querySelector","innerHTML","join","slideText","paragraphs","slideMainCategoryText","interactiveText","treemapClick","d","data","parent","links","categoryText","linksHtml","i","setMenuLinks","__webpack_require__","r","__webpack_exports__","durationFast","durationSlow","init","dataSME","dataPMSP","scroll","treemap","create","triggerSlides","window","onload","addEventListener","reset","activeSlideId","slideIds","slideId","isElementOnScreen","setActiveSlide","onscroll","bounds","top","innerHeight","bottom","wrapperId","elementId","interactive","chartDiv","append","wrap","clientWidth","clientHeight","color","scaleOrdinal","schemeCategory10","map","interpolateRgb","tile","treemapResquarify","round","paddingInner","root","hierarchy","eachBefore","sum","sumBySize","sort","cell","leaves","enter","x0","y0","x1","y1","on","timeout","stop","menuBtn","menu","menuToggle","classList","toggle","onclick","e","preventDefault","target","matches"],"mappings":"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","file":"app.5e37cda2.js","sourcesContent":["const d3 = require('d3v4');\r\nconst slidesConfigs = require('./slides_configs').configs;\r\nconst textData = require('./data/text.json');\r\nconst categoriesData = require('./data/categories.json');\r\nconst itemsData = require('./data/items.json');\r\nconst quantititesData = require('./data/quant.json');\r\n\r\nconst numeral = require('numeral');\r\nnumeral.register('locale', 'br', {\r\n    delimiters: {\r\n        thousands: '.',\r\n        decimal: ','\r\n    },\r\n    abbreviations: {\r\n        thousand: 'mil',\r\n        million: ' milh천es',\r\n        billion: ' bilh천es',\r\n        trillion: ' trilh천es'\r\n    },\r\n    currency: {\r\n        symbol: 'R$'\r\n    }\r\n});\r\nnumeral.locale('br');\r\nnumeral.defaultFormat('0,0.00');\r\n\r\nfunction fadeIn(selector) {\r\n  d3.selectAll(selector)\r\n  .transition()\r\n  .duration(slidesConfigs.duration)\r\n  .style('opacity', slidesConfigs.opacityMed)\r\n}\r\n\r\nfunction fadeAllOut() {\r\n  d3.select('.treemap').selectAll('g')\r\n  .transition()\r\n  .duration(slidesConfigs.duration)\r\n  .style('opacity', slidesConfigs.opacityLow)\r\n\r\n  d3.select('.treemap').selectAll('g').selectAll('rect')\r\n  .transition()\r\n  .duration(slidesConfigs.duration)\r\n  // .attr('stroke', '#fff')\r\n  // .attr('stroke-width', '0')\r\n  .attr('data-stroke', '')\r\n}\r\n\r\nfunction fadeGroup(selector, categories, opacity) {\r\n  categories.forEach(function (category) {\r\n    d3.selectAll(selector + category)\r\n    .transition()\r\n    .duration(slidesConfigs.duration)\r\n    .style('opacity', opacity)\r\n\r\n    d3.selectAll(selector + category)\r\n    .raise()\r\n\r\n    d3.selectAll(selector + category).select('rect')\r\n    .transition()\r\n    .duration(slidesConfigs.duration)\r\n    // .attr('stroke', '#333')\r\n    // .attr('stroke-width', '3.5')\r\n    .attr('data-stroke', 'outlined')\r\n\r\n  })\r\n}\r\n\r\nfunction defaultAnimation(slide) {\r\n  fadeAllOut()\r\n  if (slide.cat_1) {\r\n    // fadeGroup('.', [slide.cat_1], slidesConfigs.opacityMed)\r\n    fadeIn('.' + slide.cat_1, slidesConfigs.opacityMed)\r\n  }\r\n  if (slide.cat_2) {\r\n    fadeGroup('#g-', slide.cat_2, slidesConfigs.opacityHigh)\r\n  }\r\n}\r\n\r\nexport let slides = {\r\n  \"i01\": {\r\n    \"cat_1\": undefined,\r\n    \"cat_2\": undefined,\r\n    \"animation\": function () {\r\n      d3.selectAll('g')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityOff)\r\n    },\r\n  },\r\n  \"i02\": {\r\n    \"cat_2\": undefined,\r\n    \"cat_2\": undefined,\r\n    \"animation\": function () {\r\n      d3.select('#chart-pmsp').selectAll('g')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityLow)\r\n    },\r\n  },\r\n  \"i03\": {\r\n    \"cat_1\": \"pmsp-SME-edu-sme\",\r\n    \"cat_2\": undefined,\r\n    \"animation\": function () {\r\n      d3.select('#chart-pmsp').selectAll('g')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityLow)\r\n\r\n      d3.select('#g-pmsp-SME-edu-sme')\r\n      .transition()\r\n      .duration(slidesConfigs.duration)\r\n      .style('opacity', slidesConfigs.opacityMed)\r\n\r\n      if (slides['i04'].prevWidth && d3.select('#pmsp-SME-edu-sme').node().getBoundingClientRect().width !== slides['i04'].prevWidth) {\r\n        // return to previous\r\n        d3.select('#pmsp-SME-edu-sme')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .attrTween(\"height\", function() {\r\n          return d3.interpolateNumber(d3.select(this).attr(\"height\"), slides['i04'].prevHeight);\r\n        })\r\n        .attrTween(\"width\", function() {\r\n          return d3.interpolateNumber(d3.select(this).attr(\"height\"), slides['i04'].prevWidth);\r\n        });\r\n      }\r\n    }\r\n  },\r\n  \"i03_01\": {\r\n    \"cat_1\": \"pmsp-SME-edu-sme\",\r\n    \"cat_2\": [\r\n      \"pmsp-SMT-edu-outros\",\r\n      \"pmsp-EGM-edu-outros\",\r\n      \"pmsp-FUNDIP-edu-outros\",\r\n      \"pmsp-SMPIR-edu-outros\",\r\n      \"pmsp-FPETC-edu-outros\",\r\n      \"pmsp-SMADS-edu-outros\",\r\n      \"pmsp-SMTE-edu-outros\",\r\n      \"pmsp-SMIT-edu-outros\",\r\n    ],\r\n    \"animation\": function () {\r\n      d3.select('#chart-pmsp').selectAll('g')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityLow)\r\n\r\n      d3.select('#g-pmsp-SME-edu-sme')\r\n      .transition()\r\n      .duration(slidesConfigs.duration)\r\n      .style('opacity', slidesConfigs.opacityMed)\r\n\r\n      d3.selectAll('.edu-outros').each(function (rect) {\r\n        d3.select(this.parentNode)\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityMedLow)\r\n        // .attr('fill', 'rgb(0, 0, 0)')\r\n      })\r\n\r\n      if (slides['i04'].prevWidth && d3.select('#pmsp-SME-edu-sme').node().getBoundingClientRect().width !== slides['i04'].prevWidth) {\r\n        // return to previous\r\n        d3.select('#pmsp-SME-edu-sme')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .attrTween(\"height\", function() {\r\n          return d3.interpolateNumber(d3.select(this).attr(\"height\"), slides['i04'].prevHeight);\r\n        })\r\n        .attrTween(\"width\", function() {\r\n          return d3.interpolateNumber(d3.select(this).attr(\"height\"), slides['i04'].prevWidth);\r\n        });\r\n      }\r\n    }\r\n  },\r\n  \"i04\": {\r\n    \"cat_2\": undefined,\r\n    \"cat_2\": undefined,\r\n    \"animation\": function () {\r\n      // store previous size for rollback\r\n      let svgSME = d3.select('#pmsp-SME-edu-sme').node();\r\n      let svgSMEHeight = svgSME.getBoundingClientRect().height;\r\n      let svgSMEWidth = svgSME.getBoundingClientRect().width;\r\n      if (!slides['i04'].prevWidth) {\r\n        slides['i04'].prevHeight = svgSMEHeight\r\n        slides['i04'].prevWidth = svgSMEWidth\r\n      }\r\n      console.log(slides['i04'].prevHeight);\r\n\r\n      let svg = d3.select('#chart-pmsp').node();\r\n      let svgHeight = svg.getBoundingClientRect().height;\r\n      let svgWidth = svg.getBoundingClientRect().width;\r\n\r\n      // turn other rectangles off\r\n      d3.selectAll('g')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityOff)\r\n      d3.select('#g-pmsp-SME-edu-sme')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityMed)\r\n\r\n      // make sme full screen\r\n      d3.select('#pmsp-SME-edu-sme')\r\n      .transition()\r\n      .duration(slidesConfigs.duration)\r\n      .attrTween(\"height\", function() {\r\n        return d3.interpolateNumber(d3.select(this).attr(\"height\"), svgHeight);\r\n      })\r\n      .attrTween(\"width\", function() {\r\n        return d3.interpolateNumber(d3.select(this).attr(\"height\"), svgWidth);\r\n      });\r\n    }\r\n  },\r\n  \"s01\": {\r\n    \"cat_1\": undefined,\r\n    \"cat_2\": undefined,\r\n    \"animation\": function () {\r\n      d3.select('#chart-pmsp').selectAll('g')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityOff)\r\n      d3.select('#chart-sme').selectAll('g')\r\n        .transition()\r\n        .duration(slidesConfigs.duration)\r\n        .style('opacity', slidesConfigs.opacityLow)\r\n      setTimeout(function() {\r\n      }, slidesConfigs.duration);\r\n    },\r\n  },\r\n  // \"s02\": {\r\n  //   \"cat_1\": undefined,\r\n  //   \"cat_2\": undefined,\r\n  // },\r\n  \"s03\": {\r\n    \"cat_1\": \"orc-pessoal\",\r\n    \"cat_2\": undefined,\r\n  },\r\n  \"s03_01\": {\r\n    \"cat_1\": \"orc-pessoal\",\r\n    \"cat_2\": [\"orc-pessoal-docentes\"],\r\n  },\r\n  \"s03_02\": {\r\n    \"cat_1\": \"orc-pessoal\",\r\n    \"cat_2\": [\"orc-pessoal-gestores\"],\r\n  },\r\n  \"s03_03\": {\r\n    \"cat_1\": \"orc-pessoal\",\r\n    \"cat_2\": [\"orc-pessoal-estagios\", \"orc-pessoal-outros\", \"orc-pessoal-adiantamento\"],\r\n  },\r\n  \"s04\": {\r\n    \"cat_1\": \"orc-funcionamento_unidades\",\r\n    \"cat_2\": undefined,\r\n  },\r\n  \"s04_01\": {\r\n    \"cat_1\": \"orc-funcionamento_unidades\",\r\n    \"cat_2\": [\"orc-funcionamento_unidades-limpeza\"],\r\n  },\r\n  \"s04_02\": {\r\n    \"cat_1\": \"orc-funcionamento_unidades\",\r\n    \"cat_2\": [\"orc-funcionamento_unidades-vigilancia\"],\r\n  },\r\n  \"s04_03\": {\r\n    \"cat_1\": \"orc-funcionamento_unidades\",\r\n    \"cat_2\": [\r\n      \"orc-funcionamento_unidades-agua_esgoto\",\r\n      \"orc-funcionamento_unidades-eletricidade\",\r\n      \"orc-funcionamento_unidades-telefone\",\r\n    ],\r\n  },\r\n  \"s04_04\": {\r\n    \"cat_1\": \"orc-funcionamento_unidades\",\r\n    \"cat_2\": [\r\n      \"orc-funcionamento_unidades-obras_reformas\",\r\n    ],\r\n  },\r\n  \"s04_05\": {\r\n    \"cat_1\": \"orc-funcionamento_unidades\",\r\n    \"cat_2\": [\r\n      \"orc-funcionamento_unidades-manutencao\",\r\n      \"orc-funcionamento_unidades-aluguel_imoveis\",\r\n    ],\r\n  },\r\n  \"s04_06\": {\r\n    \"cat_1\": \"orc-funcionamento_unidades\",\r\n    \"cat_2\": [\r\n      \"orc-funcionamento_unidades-ceu_outros\",\r\n    ],\r\n  },\r\n  \"s04_07\": {\r\n    \"cat_1\": \"orc-funcionamento_unidades\",\r\n    \"cat_2\": [\r\n      \"orc-funcionamento_unidades-eventos\",\r\n    ],\r\n  },\r\n  \"s05\": {\r\n    \"cat_1\": \"orc-parcerias\",\r\n    \"cat_2\": undefined,\r\n  },\r\n  \"s05_01\": {\r\n    \"cat_1\": \"orc-parcerias\",\r\n    \"cat_2\": [\"orc-parcerias-creches\"],\r\n  },\r\n  \"s05_02\": {\r\n    \"cat_1\": \"orc-parcerias\",\r\n    \"cat_2\": [\"orc-parcerias-ed_especial\"],\r\n  },\r\n  \"s05_03\": {\r\n    \"cat_1\": \"orc-parcerias\",\r\n    \"cat_2\": [\r\n      \"orc-parcerias-eja\",\r\n      \"orc-parcerias-outros\"\r\n    ],\r\n  },\r\n  \"s06\": {\r\n    \"cat_1\": \"orc-alimentacao\",\r\n    \"cat_2\": undefined,\r\n  },\r\n  \"s06_01\": {\r\n    \"cat_1\": \"orc-alimentacao\",\r\n    \"cat_2\": [\"orc-alimentacao-refeicoes\"],\r\n  },\r\n  \"s06_02\": {\r\n    \"cat_1\": \"orc-alimentacao\",\r\n    \"cat_2\": [\"orc-alimentacao-insumos\"],\r\n  },\r\n  \"s06_03\": {\r\n    \"cat_1\": \"orc-alimentacao\",\r\n    \"cat_2\": [\"orc-alimentacao-prep_dist\"],\r\n  },\r\n  \"s06_04\": {\r\n    \"cat_1\": \"orc-alimentacao\",\r\n    \"cat_2\": [\"orc-alimentacao-leve_leite\"],\r\n  },\r\n  \"s06_05\": {\r\n    \"cat_1\": \"orc-alimentacao\",\r\n    \"cat_2\": [\"orc-alimentacao-pnae\"],\r\n  },\r\n  \"s07\": {\r\n    \"cat_1\": \"orc-transporte\",\r\n    \"cat_2\": undefined,\r\n  },\r\n  \"s07_01\": {\r\n    \"cat_1\": \"orc-transporte\",\r\n    \"cat_2\": [\"orc-transporte-teg\"],\r\n  },\r\n  \"s07_02\": {\r\n    \"cat_1\": \"orc-transporte\",\r\n    \"cat_2\": [\"orc-transporte-veiculos\"],\r\n  },\r\n  \"s08\": {\r\n    \"cat_1\": \"orc-uniforme_materiais\",\r\n    \"cat_2\": undefined,\r\n  },\r\n  \"s08_01\": {\r\n    \"cat_1\": \"orc-uniforme_materiais\",\r\n    \"cat_2\": [\"orc-uniforme_materiais-uniforme\"],\r\n  },\r\n  \"s08_02\": {\r\n    \"cat_1\": \"orc-uniforme_materiais\",\r\n    \"cat_2\": [\"orc-uniforme_materiais-materiais\"],\r\n  },\r\n  \"s09\": {\r\n    \"cat_1\": \"orc-transferencias\",\r\n    \"cat_2\": undefined,\r\n  },\r\n  \"s09_01\": {\r\n    \"cat_1\": \"orc-transferencias\",\r\n    \"cat_2\": [\"orc-transferencias-ptrf\"],\r\n  },\r\n  \"s10\": {\r\n    \"cat_1\": \"orc-ti\",\r\n    \"cat_2\": undefined,\r\n  },\r\n  \"s10_01\": {\r\n    \"cat_1\": \"orc-ti\",\r\n    \"cat_2\": [\"orc-ti-compra_notebooks\"],\r\n  },\r\n  \"s10_02\": {\r\n    \"cat_1\": \"orc-ti\",\r\n    \"cat_2\": [\"orc-ti-manutencao_software_sistemas\", \"orc-ti-outros\"],\r\n  },\r\n  \"s10_03\": {\r\n    \"cat_1\": \"orc-ti\",\r\n    \"cat_2\": [\"orc-ti-internet\"],\r\n  },\r\n  \"s10_04\": {\r\n    \"cat_1\": \"orc-ti\",\r\n    \"cat_2\": [\"orc-ti-manutencao_equip_ti\"],\r\n  },\r\n  \"explore\": {\r\n    \"cat_1\": undefined,\r\n    \"cat_2\": undefined,\r\n  }\r\n}\r\n\r\nObject.keys(slides).forEach(function(key, index) {\r\n  let slide = slides[key]\r\n  // set default animation for those without\r\n  slide.animation ? true : slide.animation = function () { defaultAnimation(slide); }\r\n  // set text from json file\r\n  let slideText = textData.paragraphs[key]\r\n  slideText ? slide.text = slideText.text : slide.text = '&nbsp;'\r\n  let slideMainCategoryText = categoriesData[slide.cat_1]\r\n  slideMainCategoryText ? slide.cat_1_text = slideMainCategoryText.text : false\r\n});\r\n\r\nexport function setSlideText() {\r\n  let textParagraphs = [];\r\n  Object.keys(slides).forEach(function(key, index) {\r\n    let slide = slides[key]\r\n    let text = slide.text\r\n    let id = key\r\n    let slideMainCategory = slide.cat_1\r\n    let slideCategories = slide.cat_2\r\n    let slideValues = []\r\n\r\n    let slideParent = document.getElementsByClassName(slideMainCategory)\r\n    let slideColor = slideParent[0] ? slideParent[0].getElementsByTagName('rect')[0].dataset.fill : false\r\n\r\n    if (slideCategories) {\r\n      slideCategories.forEach(function (cat) {\r\n        let slideRect = document.getElementById(cat)\r\n        let slideValue = slideRect ? slideValues.push(parseFloat(slideRect.dataset.value)) : false\r\n      })\r\n    } else if (slideMainCategory) {\r\n      let slideRects = document.querySelectorAll('[id^=\"' + slideMainCategory + '\"]')\r\n      slideRects.forEach(function (rect) {\r\n        let slideValue = rect ? slideValues.push(parseFloat(rect.dataset.value)) : false\r\n      })\r\n    }\r\n    let totalValue = slideValues.reduce((a, b) => a + b, 0)\r\n\r\n    let students = quantititesData.children.find(x => x.name === 'alunos').size\r\n    let perStudentValue = totalValue / students\r\n\r\n    totalValue = numeral(totalValue).format('$ 0.00 a')\r\n    perStudentValue = numeral(perStudentValue).format()\r\n\r\n    let valueHtml = slideValues.length ? `<p>${totalValue}</p>` : ''\r\n\r\n    // HACK: hide value for all PMSP because it isn't precise yet\r\n    if (id === 'i03_01') {\r\n      valueHtml = ''\r\n    }\r\n\r\n    // let valueHtml = slideValues.length ? `<p>${totalValue}</p><p>${perStudentValue} por aluno</p>` : ''\r\n\r\n    // alternative: display all values\r\n    // if (slideCategories) {\r\n    //   slideCategories.forEach(function (cat) {\r\n    //     let slideRect = document.getElementById(cat)\r\n    //     let slideValue = slideRect ? numeral(parseFloat(slideRect.dataset.value) / 100000).format() : false\r\n    //     slideValues.push(slideValue)\r\n    //   })\r\n    // }\r\n    // let valueHtml = slideValues.length ? `<p>${slideValues.join(',&nbsp;&nbsp;')} milh천es</p>` : ''\r\n\r\n    let categoryText = slide.cat_1_text ? slide.cat_1_text : ''\r\n\r\n    let html = `<div class=\"anchor\" id=\"a-${id}\"></div>\r\n    <div class=\"text-paragraph\" id=\"${id}\">\r\n      <div>\r\n        <span class=\"text-category\" style=\"background: ${slideColor}\">${categoryText}</span>\r\n      </div>\r\n      <h1>${text}</h1>\r\n      ${valueHtml}\r\n    </div>`\r\n    textParagraphs.push(html)\r\n  });\r\n\r\n  let textDiv = document.querySelector('#text')\r\n  textDiv.innerHTML = `${textParagraphs.join('')}`\r\n}\r\n\r\nconst interactiveText = document.getElementById('interactive-text')\r\nexport function treemapClick(d) {\r\n  // console.log(d);\r\n  fadeAllOut();\r\n  d3.select(this)\r\n    .transition()\r\n    .duration(slidesConfigs.duration)\r\n    .style('opacity', slidesConfigs.opacityMed)\r\n\r\n  let value = numeral(d.value).format('$ 0.00 a')\r\n  let category = categoriesData[d.data.parent]\r\n  let text = itemsData[d.data.id]\r\n  let color = d3.select(this).select('rect').attr('fill')\r\n\r\n  let html = `<div>\r\n    <div>\r\n      <span class=\"text-category\" style=\"background: ${color}\">${category ? category.text : ''}</span>\r\n    </div>\r\n    <h1>${text ? text.text : ''}</h1>\r\n    <p>${value}</p>\r\n  </div>`\r\n  interactiveText.innerHTML = html;\r\n\r\n  // HACK: helper\r\n  // let ids = {}\r\n  // d3.select('#chart-sme').selectAll('rect').each(function (d) {\r\n  //   let el = d3.select(this).data\r\n  //   ids[d.data.id] = {\"text\": \"\"};\r\n  // })\r\n  // console.log(JSON.stringify(ids));\r\n}\r\n\r\n// set menu links\r\nfunction setMenuLinks () {\r\n  let links = []\r\n  Object.keys(slides).forEach(function(key, index) {\r\n    let slide = slides[key]\r\n    let categoryText = slide.cat_1_text ? slide.cat_1_text : ''\r\n    let slideCategories = slide.cat_2\r\n    // console.log(categoryText, key, slideCategories)\r\n    if (!slideCategories && categoryText) {\r\n      links.push({key: key, text: categoryText})\r\n    }\r\n  })\r\n  let linksHtml = []\r\n  for (var i = 0; i < links.length; i++) {\r\n    let html =  `<li><a class='menu-links' href=\"#a-${links[i].key}\">${links[i].text}</a></li>`\r\n    linksHtml.push(html)\r\n  }\r\n  let menuDiv = document.querySelector('#menu')\r\n  menuDiv.innerHTML = `${linksHtml.join('')}`\r\n}\r\nsetMenuLinks()\r\n","export const configs = {\r\n  duration: 500,\r\n  durationFast: function () {\r\n    return this.duration / 2;\r\n  },\r\n  durationSlow: function () {\r\n    return this.duration * 2;\r\n  },\r\n  opacityHigh: 1,\r\n  opacityMed: 0.8,\r\n  opacityMedLow: 0.5,\r\n  opacityLow: 0.2,\r\n  opacityOff: 0\r\n}\r\n","import './style/main.css'\r\n\r\nconst slides = require('./slides');\r\nconst dataSME = require('./data/budget.json');\r\nconst dataPMSP = require('./data/pmsp_budget.json');\r\n\r\nconst scroll = require('./scroll');\r\nconst treemap = require('./treemap');\r\nconst menu = require('./menu');\r\n\r\nfunction isMobile() {\r\n   if(window.devicePixelRatio > 1) {\r\n     return true;\r\n   } else {\r\n     return false;\r\n   }\r\n}\r\n\r\nwindow.onload = function() {\r\n  init()\r\n};\r\n\r\nexport function init() {\r\n  treemap.create(\"chart-wrapper-sme\", \"chart-sme\", dataSME, true)\r\n  treemap.create(\"chart-wrapper-pmsp\", \"chart-pmsp\", dataPMSP, false)\r\n  slides.setSlideText()\r\n  // trigger slides to begin\r\n  scroll.triggerSlides(true)\r\n}\r\n\r\nwindow.addEventListener(\"resize\", function () {\r\n  // HACK:\r\n  slides.slides['i04'].prevWidth = undefined\r\n  slides.slides['i04'].prevHeight = undefined\r\n\r\n  init()\r\n});\r\n","const d3 = require('d3v4');\r\nconst slides = require('./slides').slides;\r\nconst slidesConfigs = require('./slides_configs').configs;\r\n\r\n// On every scroll event, check which element is on screen\r\nwindow.onscroll = function() {\r\n  triggerSlides(false)\r\n};\r\n\r\nexport function triggerSlides(reset) {\r\n  reset ? activeSlideId = undefined : false\r\n  var slideIds = Object.keys(slides);\r\n  for (var i = 0; i < slideIds.length; i++) {\r\n      var slideId = slideIds[i];\r\n      if (isElementOnScreen(slideId)) {\r\n          setActiveSlide(slideId);\r\n          break;\r\n      }\r\n  }\r\n}\r\n\r\nlet activeSlideId = 's01';\r\nfunction setActiveSlide(slideId) {\r\n    if (slideId === activeSlideId) return;\r\n\r\n    let slide = slides[slideId]\r\n\r\n    slide.animation ? slide.animation() : false\r\n\r\n    activeSlideId = slideId;\r\n}\r\n\r\nfunction isElementOnScreen(id) {\r\n    var element = document.getElementById(id);\r\n    var bounds = element.getBoundingClientRect();\r\n    var check = bounds.top < (window.innerHeight / 1) && bounds.bottom > 0;\r\n    return check;\r\n}\r\n","const d3 = require('d3v4');\r\nconst treemapClick = require('./slides').treemapClick;\r\n\r\nexport function create(wrapperId, elementId, data, interactive) {\r\n  let chartDiv = document.getElementById(elementId);\r\n  chartDiv.innerHTML = '';\r\n  let svg = d3.select(chartDiv).append(\"svg\");\r\n  // need to use wrapper because of this issue with firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=874811\r\n  let wrap = document.getElementById(wrapperId)\r\n  let width = wrap.clientWidth;\r\n  let height = wrap.clientHeight;\r\n\r\n  let fader = function(color) { return d3.interpolateRgb(color, \"#fff\")(0.2); },\r\n  color = d3.scaleOrdinal(d3.schemeCategory10.map(fader)),\r\n  format = d3.format(\",d\");\r\n\r\n  let treemap = d3.treemap()\r\n  .tile(d3.treemapResquarify)\r\n  .size([width, height])\r\n  .round(true)\r\n  // FIXME: padding here\r\n  .paddingInner(1);\r\n\r\n  let root = d3.hierarchy(data)\r\n  .eachBefore(function(d) { d.data.id = (d.parent ? d.parent.data.id + \"-\" : \"\") + d.data.name; })\r\n  .eachBefore(function(d) { d.data.parent = (d.parent ? d.parent.data.id : \"\"); })\r\n  .sum(sumBySize)\r\n  .sort(function(a, b) { return b.height - a.height || b.value - a.value; });\r\n\r\n  treemap(root);\r\n\r\n  let cell = svg.selectAll(\"g\")\r\n  .data(root.leaves())\r\n  .enter().append(\"g\")\r\n  .attr(\"id\", function(d) { return \"g-\" + d.data.id; })\r\n  .attr(\"class\", function(d) { return d.data.parent; })\r\n  .style(\"opacity\", 0)\r\n  .attr(\"transform\", function(d) { return \"translate(\" + d.x0 + \",\" + d.y0 + \")\"; });\r\n\r\n  cell.append(\"rect\")\r\n  .attr(\"id\", function(d) { return d.data.id; })\r\n  .attr(\"class\", function(d) { return d.data.name; })\r\n  .attr(\"data-value\", function(d) { return d.value; })\r\n  .attr(\"width\", function(d) { return d.x1 - d.x0; })\r\n  .attr(\"height\", function(d) { return d.y1 - d.y0; })\r\n  .attr(\"stroke\", \"#fff\")\r\n  .attr(\"stroke-width\", 0)\r\n  .attr(\"fill\", function(d) {\r\n      return elementId === \"chart-pmsp\" ? \"#333\" : color(d.parent.data.id);\r\n  })\r\n  .attr(\"data-fill\", function(d) {\r\n      return elementId === \"chart-pmsp\" ? \"#333\" : color(d.parent.data.id);\r\n  });\r\n\r\n  if (interactive) {\r\n    cell.on(\"click\", treemapClick);\r\n  }\r\n\r\n  cell.append(\"clipPath\")\r\n  .attr(\"id\", function(d) { return \"clip-\" + d.data.id; })\r\n  .append(\"use\")\r\n  .attr(\"xlink:href\", function(d) { return \"#\" + d.data.id; });\r\n\r\n  // cell.append(\"text\")\r\n  // .attr(\"clip-path\", function(d) { return \"url(#clip-\" + d.data.id + \")\"; })\r\n  // .selectAll(\"tspan\")\r\n  // // .data(function(d) { return d.data.name.split(/(?=[A-Z][^A-Z])/g); })\r\n  // .data(function(d) { return String((d.value / 1000000).toFixed(2)).split(/(?=[A-Z][^A-Z])/g); })\r\n  // .enter().append(\"tspan\")\r\n  // .attr(\"x\", 4)\r\n  // .attr(\"y\", function(d, i) { return 13 + i * 10; })\r\n  // .text(function(d) { return d; });\r\n  //\r\n  // cell.append(\"title\")\r\n  // .text(function(d) { return d.data.id + \"\\n\" + format(d.value); });\r\n\r\n  d3.selectAll(\"input\")\r\n  .data([sumBySize, sumByCount], function(d) { return d ? d.name : this.value; })\r\n  .on(\"change\", changed);\r\n\r\n  // let timeout = d3.timeout(function() {\r\n  //   d3.select(\"input[value=\\\"sumByCount\\\"]\")\r\n  //       .property(\"checked\", true)\r\n  //       .dispatch(\"change\");\r\n  // }, 2000);\r\n\r\n  function changed(sum) {\r\n    timeout.stop();\r\n\r\n    treemap(root.sum(sum));\r\n\r\n    cell.transition()\r\n    .duration(750)\r\n    .attr(\"transform\", function(d) { return \"translate(\" + d.x0 + \",\" + d.y0 + \")\"; })\r\n    .select(\"rect\")\r\n    .attr(\"width\", function(d) { return d.x1 - d.x0; })\r\n    .attr(\"height\", function(d) { return d.y1 - d.y0; });\r\n  }\r\n\r\n  function sumByCount(d) {\r\n    return d.children ? 0 : 1;\r\n  }\r\n\r\n  function sumBySize(d) {\r\n    return d.size;\r\n  }\r\n}\r\n","const menuBtn = document.getElementById('menu-toggle')\r\nconst menu = document.getElementById('menu')\r\n\r\nmenuBtn.onclick = function(e) {\r\n  e.preventDefault()\r\n  menuToggle()\r\n}\r\nfunction menuToggle () {\r\n  menu.classList.toggle('show')\r\n}\r\n\r\ndocument.addEventListener('click', function (e) {\r\n\tif (!e.target.matches('.menu-links')) return;\r\n  menuToggle()\r\n}, false);"],"sourceRoot":""}