{"version":3,"sources":["webpack:///./src/slides.js","webpack:///./src/slides_configs.js","webpack:///./src/index.js","webpack:///./src/scroll.js","webpack:///./src/treemap.js","webpack:///./src/menu.js"],"names":["d3","require","slidesConfigs","configs","textData","categoriesData","itemsData","quantititesData","numeral","fadeAllOut","select","selectAll","transition","duration","style","opacityLow","attr","defaultAnimation","slide","cat_1","selector","opacityMed","fadeIn","cat_2","categories","opacity","forEach","category","raise","fadeGroup","opacityHigh","register","delimiters","thousands","decimal","abbreviations","thousand","million","billion","trillion","currency","symbol","locale","defaultFormat","slides","i01","undefined","animation","opacityOff","i02","_i","i03","prevWidth","node","getBoundingClientRect","width","attrTween","interpolateNumber","this","prevHeight","i03_01","each","rect","parentNode","opacityMedLow","i04","_i2","svgSME","svgSMEHeight","height","svgSMEWidth","console","log","svg","svgHeight","svgWidth","s01","setTimeout","s03","s03_01","s03_02","s03_03","s04","s04_01","s04_02","s04_03","s04_04","s04_05","s04_06","s04_07","s05","s05_01","s05_02","s05_03","s06","s06_01","s06_02","s06_03","s06_04","s06_05","s07","s07_01","s07_02","s08","s08_01","s08_02","s09","s09_01","s10","s10_01","s10_02","s10_03","s10_04","explore","setSlideText","textParagraphs","Object","keys","key","index","text","id","slideMainCategory","slideCategories","slideValues","slideParent","document","getElementsByClassName","slideColor","getElementsByTagName","dataset","fill","cat","slideRect","getElementById","push","parseFloat","value","querySelectorAll","totalValue","reduce","a","b","perStudentValue","children","find","x","name","size","format","valueHtml","length","html","cat_1_text","querySelector","innerHTML","join","slideText","paragraphs","slideMainCategoryText","interactiveText","treemapClick","d","data","parent","links","categoryText","linksHtml","i","setMenuLinks","__webpack_require__","r","__webpack_exports__","durationFast","durationSlow","init","dataSME","dataPMSP","scroll","treemap","create","triggerSlides","window","onload","addEventListener","reset","activeSlideId","slideIds","slideId","isElementOnScreen","setActiveSlide","onscroll","bounds","top","innerHeight","bottom","wrapperId","elementId","interactive","chartDiv","append","wrap","clientWidth","clientHeight","color","scaleOrdinal","schemeCategory10","map","interpolateRgb","tile","treemapResquarify","round","paddingInner","root","hierarchy","eachBefore","sum","sumBySize","sort","cell","leaves","enter","x0","y0","x1","y1","on","timeout","stop","menuBtn","menu","menuToggle","classList","toggle","onclick","e","preventDefault","target","matches"],"mappings":"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","file":"app.26912365.js","sourcesContent":["const d3 = require('d3v4');\nconst slidesConfigs = require('./slides_configs').configs;\nconst textData = require('./data/text.json');\nconst categoriesData = require('./data/categories.json');\nconst itemsData = require('./data/items.json');\nconst quantititesData = require('./data/quant.json');\n\nconst numeral = require('numeral');\nnumeral.register('locale', 'br', {\n    delimiters: {\n        thousands: '.',\n        decimal: ','\n    },\n    abbreviations: {\n        thousand: 'mil',\n        million: ' milh천es',\n        billion: ' bilh천es',\n        trillion: ' trilh천es'\n    },\n    currency: {\n        symbol: 'R$'\n    }\n});\nnumeral.locale('br');\nnumeral.defaultFormat('0,0.00');\n\nfunction fadeIn(selector) {\n  d3.selectAll(selector)\n  .transition()\n  .duration(slidesConfigs.duration)\n  .style('opacity', slidesConfigs.opacityMed)\n}\n\nfunction fadeAllOut() {\n  d3.select('.treemap').selectAll('g')\n  .transition()\n  .duration(slidesConfigs.duration)\n  .style('opacity', slidesConfigs.opacityLow)\n\n  d3.select('.treemap').selectAll('g').selectAll('rect')\n  .transition()\n  .duration(slidesConfigs.duration)\n  // .attr('stroke', '#fff')\n  // .attr('stroke-width', '0')\n  .attr('data-stroke', '')\n}\n\nfunction fadeGroup(selector, categories, opacity) {\n  categories.forEach(function (category) {\n    d3.selectAll(selector + category)\n    .transition()\n    .duration(slidesConfigs.duration)\n    .style('opacity', opacity)\n\n    d3.selectAll(selector + category)\n    .raise()\n\n    d3.selectAll(selector + category).select('rect')\n    .transition()\n    .duration(slidesConfigs.duration)\n    // .attr('stroke', '#333')\n    // .attr('stroke-width', '3.5')\n    .attr('data-stroke', 'outlined')\n\n  })\n}\n\nfunction defaultAnimation(slide) {\n  fadeAllOut()\n  if (slide.cat_1) {\n    // fadeGroup('.', [slide.cat_1], slidesConfigs.opacityMed)\n    fadeIn('.' + slide.cat_1, slidesConfigs.opacityMed)\n  }\n  if (slide.cat_2) {\n    fadeGroup('#g-', slide.cat_2, slidesConfigs.opacityHigh)\n  }\n}\n\nexport let slides = {\n  \"i01\": {\n    \"cat_1\": undefined,\n    \"cat_2\": undefined,\n    \"animation\": function () {\n      d3.selectAll('g')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityOff)\n    },\n  },\n  \"i02\": {\n    \"cat_2\": undefined,\n    \"cat_2\": undefined,\n    \"animation\": function () {\n      d3.select('#chart-pmsp').selectAll('g')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityLow)\n    },\n  },\n  \"i03\": {\n    \"cat_1\": \"pmsp-SME-edu-sme\",\n    \"cat_2\": undefined,\n    \"animation\": function () {\n      d3.select('#chart-pmsp').selectAll('g')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityLow)\n\n      d3.select('#g-pmsp-SME-edu-sme')\n      .transition()\n      .duration(slidesConfigs.duration)\n      .style('opacity', slidesConfigs.opacityMed)\n\n      if (slides['i04'].prevWidth && d3.select('#pmsp-SME-edu-sme').node().getBoundingClientRect().width !== slides['i04'].prevWidth) {\n        // return to previous\n        d3.select('#pmsp-SME-edu-sme')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .attrTween(\"height\", function() {\n          return d3.interpolateNumber(d3.select(this).attr(\"height\"), slides['i04'].prevHeight);\n        })\n        .attrTween(\"width\", function() {\n          return d3.interpolateNumber(d3.select(this).attr(\"height\"), slides['i04'].prevWidth);\n        });\n      }\n    }\n  },\n  \"i03_01\": {\n    \"cat_1\": \"pmsp-SME-edu-sme\",\n    \"cat_2\": [\n      \"pmsp-SMT-edu-outros\",\n      \"pmsp-EGM-edu-outros\",\n      \"pmsp-FUNDIP-edu-outros\",\n      \"pmsp-SMPIR-edu-outros\",\n      \"pmsp-FPETC-edu-outros\",\n      \"pmsp-SMADS-edu-outros\",\n      \"pmsp-SMTE-edu-outros\",\n      \"pmsp-SMIT-edu-outros\",\n    ],\n    \"animation\": function () {\n      d3.select('#chart-pmsp').selectAll('g')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityLow)\n\n      d3.select('#g-pmsp-SME-edu-sme')\n      .transition()\n      .duration(slidesConfigs.duration)\n      .style('opacity', slidesConfigs.opacityMed)\n\n      d3.selectAll('.edu-outros').each(function (rect) {\n        d3.select(this.parentNode)\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityMedLow)\n        // .attr('fill', 'rgb(0, 0, 0)')\n      })\n\n      if (slides['i04'].prevWidth && d3.select('#pmsp-SME-edu-sme').node().getBoundingClientRect().width !== slides['i04'].prevWidth) {\n        // return to previous\n        d3.select('#pmsp-SME-edu-sme')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .attrTween(\"height\", function() {\n          return d3.interpolateNumber(d3.select(this).attr(\"height\"), slides['i04'].prevHeight);\n        })\n        .attrTween(\"width\", function() {\n          return d3.interpolateNumber(d3.select(this).attr(\"height\"), slides['i04'].prevWidth);\n        });\n      }\n    }\n  },\n  \"i04\": {\n    \"cat_2\": undefined,\n    \"cat_2\": undefined,\n    \"animation\": function () {\n      // store previous size for rollback\n      let svgSME = d3.select('#pmsp-SME-edu-sme').node();\n      let svgSMEHeight = svgSME.getBoundingClientRect().height;\n      let svgSMEWidth = svgSME.getBoundingClientRect().width;\n      if (!slides['i04'].prevWidth) {\n        slides['i04'].prevHeight = svgSMEHeight\n        slides['i04'].prevWidth = svgSMEWidth\n      }\n      console.log(slides['i04'].prevHeight);\n\n      let svg = d3.select('#chart-pmsp').node();\n      let svgHeight = svg.getBoundingClientRect().height;\n      let svgWidth = svg.getBoundingClientRect().width;\n\n      // turn other rectangles off\n      d3.selectAll('g')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityOff)\n      d3.select('#g-pmsp-SME-edu-sme')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityMed)\n\n      // make sme full screen\n      d3.select('#pmsp-SME-edu-sme')\n      .transition()\n      .duration(slidesConfigs.duration)\n      .attrTween(\"height\", function() {\n        return d3.interpolateNumber(d3.select(this).attr(\"height\"), svgHeight);\n      })\n      .attrTween(\"width\", function() {\n        return d3.interpolateNumber(d3.select(this).attr(\"height\"), svgWidth);\n      });\n    }\n  },\n  \"s01\": {\n    \"cat_1\": undefined,\n    \"cat_2\": undefined,\n    \"animation\": function () {\n      d3.select('#chart-pmsp').selectAll('g')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityOff)\n      d3.select('#chart-sme').selectAll('g')\n        .transition()\n        .duration(slidesConfigs.duration)\n        .style('opacity', slidesConfigs.opacityLow)\n      setTimeout(function() {\n      }, slidesConfigs.duration);\n    },\n  },\n  // \"s02\": {\n  //   \"cat_1\": undefined,\n  //   \"cat_2\": undefined,\n  // },\n  \"s03\": {\n    \"cat_1\": \"orc-pessoal\",\n    \"cat_2\": undefined,\n  },\n  \"s03_01\": {\n    \"cat_1\": \"orc-pessoal\",\n    \"cat_2\": [\"orc-pessoal-docentes\"],\n  },\n  \"s03_02\": {\n    \"cat_1\": \"orc-pessoal\",\n    \"cat_2\": [\"orc-pessoal-gestores\"],\n  },\n  \"s03_03\": {\n    \"cat_1\": \"orc-pessoal\",\n    \"cat_2\": [\"orc-pessoal-estagios\", \"orc-pessoal-outros\", \"orc-pessoal-adiantamento\"],\n  },\n  \"s04\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": undefined,\n  },\n  \"s04_01\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\"orc-funcionamento_unidades-limpeza\"],\n  },\n  \"s04_02\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\"orc-funcionamento_unidades-vigilancia\"],\n  },\n  \"s04_03\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\n      \"orc-funcionamento_unidades-agua_esgoto\",\n      \"orc-funcionamento_unidades-eletricidade\",\n      \"orc-funcionamento_unidades-telefone\",\n    ],\n  },\n  \"s04_04\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\n      \"orc-funcionamento_unidades-obras_reformas\",\n    ],\n  },\n  \"s04_05\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\n      \"orc-funcionamento_unidades-manutencao\",\n      \"orc-funcionamento_unidades-aluguel_imoveis\",\n    ],\n  },\n  \"s04_06\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\n      \"orc-funcionamento_unidades-ceu_outros\",\n    ],\n  },\n  \"s04_07\": {\n    \"cat_1\": \"orc-funcionamento_unidades\",\n    \"cat_2\": [\n      \"orc-funcionamento_unidades-eventos\",\n    ],\n  },\n  \"s05\": {\n    \"cat_1\": \"orc-parcerias\",\n    \"cat_2\": undefined,\n  },\n  \"s05_01\": {\n    \"cat_1\": \"orc-parcerias\",\n    \"cat_2\": [\"orc-parcerias-creches\"],\n  },\n  \"s05_02\": {\n    \"cat_1\": \"orc-parcerias\",\n    \"cat_2\": [\"orc-parcerias-ed_especial\"],\n  },\n  \"s05_03\": {\n    \"cat_1\": \"orc-parcerias\",\n    \"cat_2\": [\n      \"orc-parcerias-eja\",\n      \"orc-parcerias-outros\"\n    ],\n  },\n  \"s06\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": undefined,\n  },\n  \"s06_01\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-refeicoes\"],\n  },\n  \"s06_02\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-insumos\"],\n  },\n  \"s06_03\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-prep_dist\"],\n  },\n  \"s06_04\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-leve_leite\"],\n  },\n  \"s06_05\": {\n    \"cat_1\": \"orc-alimentacao\",\n    \"cat_2\": [\"orc-alimentacao-pnae\"],\n  },\n  \"s07\": {\n    \"cat_1\": \"orc-transporte\",\n    \"cat_2\": undefined,\n  },\n  \"s07_01\": {\n    \"cat_1\": \"orc-transporte\",\n    \"cat_2\": [\"orc-transporte-teg\"],\n  },\n  \"s07_02\": {\n    \"cat_1\": \"orc-transporte\",\n    \"cat_2\": [\"orc-transporte-veiculos\"],\n  },\n  \"s08\": {\n    \"cat_1\": \"orc-uniforme_materiais\",\n    \"cat_2\": undefined,\n  },\n  \"s08_01\": {\n    \"cat_1\": \"orc-uniforme_materiais\",\n    \"cat_2\": [\"orc-uniforme_materiais-uniforme\"],\n  },\n  \"s08_02\": {\n    \"cat_1\": \"orc-uniforme_materiais\",\n    \"cat_2\": [\"orc-uniforme_materiais-materiais\"],\n  },\n  \"s09\": {\n    \"cat_1\": \"orc-transferencias\",\n    \"cat_2\": undefined,\n  },\n  \"s09_01\": {\n    \"cat_1\": \"orc-transferencias\",\n    \"cat_2\": [\"orc-transferencias-ptrf\"],\n  },\n  \"s10\": {\n    \"cat_1\": \"orc-ti\",\n    \"cat_2\": undefined,\n  },\n  \"s10_01\": {\n    \"cat_1\": \"orc-ti\",\n    \"cat_2\": [\"orc-ti-compra_notebooks\"],\n  },\n  \"s10_02\": {\n    \"cat_1\": \"orc-ti\",\n    \"cat_2\": [\"orc-ti-manutencao_software_sistemas\", \"orc-ti-outros\"],\n  },\n  \"s10_03\": {\n    \"cat_1\": \"orc-ti\",\n    \"cat_2\": [\"orc-ti-internet\"],\n  },\n  \"s10_04\": {\n    \"cat_1\": \"orc-ti\",\n    \"cat_2\": [\"orc-ti-manutencao_equip_ti\"],\n  },\n  \"explore\": {\n    \"cat_1\": undefined,\n    \"cat_2\": undefined,\n  }\n}\n\nObject.keys(slides).forEach(function(key, index) {\n  let slide = slides[key]\n  // set default animation for those without\n  slide.animation ? true : slide.animation = function () { defaultAnimation(slide); }\n  // set text from json file\n  let slideText = textData.paragraphs[key]\n  slideText ? slide.text = slideText.text : slide.text = '&nbsp;'\n  let slideMainCategoryText = categoriesData[slide.cat_1]\n  slideMainCategoryText ? slide.cat_1_text = slideMainCategoryText.text : false\n});\n\nexport function setSlideText() {\n  let textParagraphs = [];\n  Object.keys(slides).forEach(function(key, index) {\n    let slide = slides[key]\n    let text = slide.text\n    let id = key\n    let slideMainCategory = slide.cat_1\n    let slideCategories = slide.cat_2\n    let slideValues = []\n\n    let slideParent = document.getElementsByClassName(slideMainCategory)\n    let slideColor = slideParent[0] ? slideParent[0].getElementsByTagName('rect')[0].dataset.fill : false\n\n    if (slideCategories) {\n      slideCategories.forEach(function (cat) {\n        let slideRect = document.getElementById(cat)\n        let slideValue = slideRect ? slideValues.push(parseFloat(slideRect.dataset.value)) : false\n      })\n    } else if (slideMainCategory) {\n      let slideRects = document.querySelectorAll('[id^=\"' + slideMainCategory + '\"]')\n      slideRects.forEach(function (rect) {\n        let slideValue = rect ? slideValues.push(parseFloat(rect.dataset.value)) : false\n      })\n    }\n    let totalValue = slideValues.reduce((a, b) => a + b, 0)\n\n    let students = quantititesData.children.find(x => x.name === 'alunos').size\n    let perStudentValue = totalValue / students\n\n    totalValue = numeral(totalValue).format('$ 0.00 a')\n    perStudentValue = numeral(perStudentValue).format()\n\n    let valueHtml = slideValues.length ? `<p>${totalValue}</p>` : ''\n\n    // HACK: hide value for all PMSP because it isn't precise yet\n    if (id === 'i03_01') {\n      valueHtml = ''\n    }\n\n    // let valueHtml = slideValues.length ? `<p>${totalValue}</p><p>${perStudentValue} por aluno</p>` : ''\n\n    // alternative: display all values\n    // if (slideCategories) {\n    //   slideCategories.forEach(function (cat) {\n    //     let slideRect = document.getElementById(cat)\n    //     let slideValue = slideRect ? numeral(parseFloat(slideRect.dataset.value) / 100000).format() : false\n    //     slideValues.push(slideValue)\n    //   })\n    // }\n    // let valueHtml = slideValues.length ? `<p>${slideValues.join(',&nbsp;&nbsp;')} milh천es</p>` : ''\n\n    let categoryText = slide.cat_1_text ? slide.cat_1_text : ''\n\n    let html = `<div class=\"anchor\" id=\"a-${id}\"></div>\n    <div class=\"text-paragraph\" id=\"${id}\">\n      <div>\n        <span class=\"text-category\" style=\"background: ${slideColor}\">${categoryText}</span>\n      </div>\n      <h1>${text}</h1>\n      ${valueHtml}\n    </div>`\n    textParagraphs.push(html)\n  });\n\n  let textDiv = document.querySelector('#text')\n  textDiv.innerHTML = `${textParagraphs.join('')}`\n}\n\nconst interactiveText = document.getElementById('interactive-text')\nexport function treemapClick(d) {\n  // console.log(d);\n  fadeAllOut();\n  d3.select(this)\n    .transition()\n    .duration(slidesConfigs.duration)\n    .style('opacity', slidesConfigs.opacityMed)\n\n  let value = numeral(d.value).format('$ 0.00 a')\n  let category = categoriesData[d.data.parent]\n  let text = itemsData[d.data.id]\n  let color = d3.select(this).select('rect').attr('fill')\n\n  let html = `<div>\n    <div>\n      <span class=\"text-category\" style=\"background: ${color}\">${category ? category.text : ''}</span>\n    </div>\n    <h1>${text ? text.text : ''}</h1>\n    <p>${value}</p>\n  </div>`\n  interactiveText.innerHTML = html;\n\n  // HACK: helper\n  // let ids = {}\n  // d3.select('#chart-sme').selectAll('rect').each(function (d) {\n  //   let el = d3.select(this).data\n  //   ids[d.data.id] = {\"text\": \"\"};\n  // })\n  // console.log(JSON.stringify(ids));\n}\n\n// set menu links\nfunction setMenuLinks () {\n  let links = []\n  Object.keys(slides).forEach(function(key, index) {\n    let slide = slides[key]\n    let categoryText = slide.cat_1_text ? slide.cat_1_text : ''\n    let slideCategories = slide.cat_2\n    // console.log(categoryText, key, slideCategories)\n    if (!slideCategories && categoryText) {\n      links.push({key: key, text: categoryText})\n    }\n  })\n  let linksHtml = []\n  for (var i = 0; i < links.length; i++) {\n    let html =  `<li><a class='menu-links' href=\"#a-${links[i].key}\">${links[i].text}</a></li>`\n    linksHtml.push(html)\n  }\n  let menuDiv = document.querySelector('#menu')\n  menuDiv.innerHTML = `${linksHtml.join('')}`\n}\nsetMenuLinks()\n","export const configs = {\n  duration: 500,\n  durationFast: function () {\n    return this.duration / 2;\n  },\n  durationSlow: function () {\n    return this.duration * 2;\n  },\n  opacityHigh: 1,\n  opacityMed: 0.8,\n  opacityMedLow: 0.5,\n  opacityLow: 0.2,\n  opacityOff: 0\n}\n","import './style/main.css'\n\nconst slides = require('./slides');\nconst dataSME = require('./data/budget.json');\nconst dataPMSP = require('./data/pmsp_budget.json');\n\nconst scroll = require('./scroll');\nconst treemap = require('./treemap');\nconst menu = require('./menu');\n\nfunction isMobile() {\n   if(window.devicePixelRatio > 1) {\n     return true;\n   } else {\n     return false;\n   }\n}\n\nwindow.onload = function() {\n  init()\n};\n\nexport function init() {\n  treemap.create(\"chart-wrapper-sme\", \"chart-sme\", dataSME, true)\n  treemap.create(\"chart-wrapper-pmsp\", \"chart-pmsp\", dataPMSP, false)\n  slides.setSlideText()\n  // trigger slides to begin\n  scroll.triggerSlides(true)\n}\n\nwindow.addEventListener(\"resize\", function () {\n  // HACK:\n  slides.slides['i04'].prevWidth = undefined\n  slides.slides['i04'].prevHeight = undefined\n\n  init()\n});\n","const d3 = require('d3v4');\nconst slides = require('./slides').slides;\nconst slidesConfigs = require('./slides_configs').configs;\n\n// On every scroll event, check which element is on screen\nwindow.onscroll = function() {\n  triggerSlides(false)\n};\n\nexport function triggerSlides(reset) {\n  reset ? activeSlideId = undefined : false\n  var slideIds = Object.keys(slides);\n  for (var i = 0; i < slideIds.length; i++) {\n      var slideId = slideIds[i];\n      if (isElementOnScreen(slideId)) {\n          setActiveSlide(slideId);\n          break;\n      }\n  }\n}\n\nlet activeSlideId = 's01';\nfunction setActiveSlide(slideId) {\n    if (slideId === activeSlideId) return;\n\n    let slide = slides[slideId]\n\n    slide.animation ? slide.animation() : false\n\n    activeSlideId = slideId;\n}\n\nfunction isElementOnScreen(id) {\n    var element = document.getElementById(id);\n    var bounds = element.getBoundingClientRect();\n    var check = bounds.top < (window.innerHeight / 1) && bounds.bottom > 0;\n    return check;\n}\n","const d3 = require('d3v4');\nconst treemapClick = require('./slides').treemapClick;\n\nexport function create(wrapperId, elementId, data, interactive) {\n  let chartDiv = document.getElementById(elementId);\n  chartDiv.innerHTML = '';\n  let svg = d3.select(chartDiv).append(\"svg\");\n  // need to use wrapper because of this issue with firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=874811\n  let wrap = document.getElementById(wrapperId)\n  let width = wrap.clientWidth;\n  let height = wrap.clientHeight;\n\n  let fader = function(color) { return d3.interpolateRgb(color, \"#fff\")(0.2); },\n  color = d3.scaleOrdinal(d3.schemeCategory10.map(fader)),\n  format = d3.format(\",d\");\n\n  let treemap = d3.treemap()\n  .tile(d3.treemapResquarify)\n  .size([width, height])\n  .round(true)\n  // FIXME: padding here\n  .paddingInner(1);\n\n  let root = d3.hierarchy(data)\n  .eachBefore(function(d) { d.data.id = (d.parent ? d.parent.data.id + \"-\" : \"\") + d.data.name; })\n  .eachBefore(function(d) { d.data.parent = (d.parent ? d.parent.data.id : \"\"); })\n  .sum(sumBySize)\n  .sort(function(a, b) { return b.height - a.height || b.value - a.value; });\n\n  treemap(root);\n\n  let cell = svg.selectAll(\"g\")\n  .data(root.leaves())\n  .enter().append(\"g\")\n  .attr(\"id\", function(d) { return \"g-\" + d.data.id; })\n  .attr(\"class\", function(d) { return d.data.parent; })\n  .style(\"opacity\", 0)\n  .attr(\"transform\", function(d) { return \"translate(\" + d.x0 + \",\" + d.y0 + \")\"; });\n\n  cell.append(\"rect\")\n  .attr(\"id\", function(d) { return d.data.id; })\n  .attr(\"class\", function(d) { return d.data.name; })\n  .attr(\"data-value\", function(d) { return d.value; })\n  .attr(\"width\", function(d) { return d.x1 - d.x0; })\n  .attr(\"height\", function(d) { return d.y1 - d.y0; })\n  .attr(\"stroke\", \"#fff\")\n  .attr(\"stroke-width\", 0)\n  .attr(\"fill\", function(d) {\n      return elementId === \"chart-pmsp\" ? \"#333\" : color(d.parent.data.id);\n  })\n  .attr(\"data-fill\", function(d) {\n      return elementId === \"chart-pmsp\" ? \"#333\" : color(d.parent.data.id);\n  });\n\n  if (interactive) {\n    cell.on(\"click\", treemapClick);\n  }\n\n  cell.append(\"clipPath\")\n  .attr(\"id\", function(d) { return \"clip-\" + d.data.id; })\n  .append(\"use\")\n  .attr(\"xlink:href\", function(d) { return \"#\" + d.data.id; });\n\n  // cell.append(\"text\")\n  // .attr(\"clip-path\", function(d) { return \"url(#clip-\" + d.data.id + \")\"; })\n  // .selectAll(\"tspan\")\n  // // .data(function(d) { return d.data.name.split(/(?=[A-Z][^A-Z])/g); })\n  // .data(function(d) { return String((d.value / 1000000).toFixed(2)).split(/(?=[A-Z][^A-Z])/g); })\n  // .enter().append(\"tspan\")\n  // .attr(\"x\", 4)\n  // .attr(\"y\", function(d, i) { return 13 + i * 10; })\n  // .text(function(d) { return d; });\n  //\n  // cell.append(\"title\")\n  // .text(function(d) { return d.data.id + \"\\n\" + format(d.value); });\n\n  d3.selectAll(\"input\")\n  .data([sumBySize, sumByCount], function(d) { return d ? d.name : this.value; })\n  .on(\"change\", changed);\n\n  // let timeout = d3.timeout(function() {\n  //   d3.select(\"input[value=\\\"sumByCount\\\"]\")\n  //       .property(\"checked\", true)\n  //       .dispatch(\"change\");\n  // }, 2000);\n\n  function changed(sum) {\n    timeout.stop();\n\n    treemap(root.sum(sum));\n\n    cell.transition()\n    .duration(750)\n    .attr(\"transform\", function(d) { return \"translate(\" + d.x0 + \",\" + d.y0 + \")\"; })\n    .select(\"rect\")\n    .attr(\"width\", function(d) { return d.x1 - d.x0; })\n    .attr(\"height\", function(d) { return d.y1 - d.y0; });\n  }\n\n  function sumByCount(d) {\n    return d.children ? 0 : 1;\n  }\n\n  function sumBySize(d) {\n    return d.size;\n  }\n}\n","const menuBtn = document.getElementById('menu-toggle')\nconst menu = document.getElementById('menu')\n\nmenuBtn.onclick = function(e) {\n  e.preventDefault()\n  menuToggle()\n}\nfunction menuToggle () {\n  menu.classList.toggle('show')\n}\n\ndocument.addEventListener('click', function (e) {\n\tif (!e.target.matches('.menu-links')) return;\n  menuToggle()\n}, false);\n"],"sourceRoot":""}